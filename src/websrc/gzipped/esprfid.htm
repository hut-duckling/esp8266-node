<div id="progresscontent"><br><br><div class="container"><div class="row"><br><div class="col-md-8 col-md-offset-2"><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">لطفا تا راه‌اندازی مجدد برد منتظر بمانید...</h3></div><div class="panel-body"><div class="progress"><div id="updateprog" class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">0%</div></div></div><div class="panel-footer text-center" id="reconnect" style="display:none;"></div></div></div></div></div></div><div id="generalcontent"><br><br><legend>تنظیمات اساسی</legend><br><div class="row form-group"><label class="col-xs-3">کلمه عبور مدیر<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="کلمه‌عبوری که مدیر برای ورود به دستگاه وارد می‌کند"></i></label> <span class="col-xs-9 col-md-5"><input class="form-control input-sm" placeholder="کلمه عبور مدیر" id="adminpwd" type="password"></span><br></div><div class="row form-group"><label class="col-xs-3">نام دستگاه<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="با استفاده از این نام، شما می‌توانید بدون نیاز به داشتن آدرس آی‌پی، به دستگاه متصل شوید، به عنوان مثال: http://hostname.local"></i></label> <span class="col-xs-9 col-md-5"><input class="form-control input-sm" placeholder="Hostname" value="hut-duckling" id="hostname" type="text"></span><br></div><div class="row form-group"><label class="col-xs-3">ری‌استارت خودکار<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="دستگاه هر چند مدت یکبار ری‌استارت شود؟ این امکان برای جلوگیری از مموری‌لیک پیش‌بینی شده است."></i></label> <span class="col-xs-9 col-md-5"><select class="form-control input-sm" id="autorestart" name="autorestart"><option value="0">هیچوقت</option><option value="86400" selected="selected">هر ۲۴ ساعت</option><option value="604800">هر ۷ روز</option><option value="18144000">هر ۳۰ روز</option></select></span><br><br><div class="col-xs-9 col-md-8"><button onclick="savegeneral()" class="btn btn-primary btn-sm pull-right">ذخیره</button></div></div><div style="clear:both;"><br><br></div></div><br><br><div id="hardwarecontent"><br><br><legend>تنظیمات سخت‌افزار</legend><div class="row form-group" id="activateTimeForm"><label class="col-xs-3">زمان فعال بودن<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="زمان فعال بودن رله را مشخص کنید؛ این زمان به ثانیه می‌باشد."></i></label> <span class="col-xs-9 col-md-5"><input class="form-control input-sm" value="300" placeholder="به ثانیه" id="delay" type="text" name="hightime"></span></div><div class="row form-group"><br><br><div class="col-xs-9 col-md-8"><button onclick="savehardware()" class="btn btn-primary btn-sm pull-right">ذخیره</button></div></div><br><br></div><div id="logcontent"><br><br><div class="text-center" id="loading-img"><h5>در حال دریافت اطلاعات، لطفا منتظر بمانید...<span id="loadpages"></span></h5><br></div><div><legend>گزارشات دسترسی</legend><div class="panel panel-default"><div><table id="latestlogtable" class="table" data-paging="true" data-filtering="true" data-sorting="true" data-editing="false" data-state="true"></table></div></div><button onclick="clearlatest()" class="btn btn-primary btn-sm">پاکسازی گزارشات</button><div style="clear:both;"><br><br></div></div><br><br></div><div id="eventcontent"><br><br><div class="text-center" id="loading-img"><h5>در حال دریافت اطلاعات، لطفا منتظر بمانید...<span id="loadpages"></span></h5><br></div><div><legend>رخدادها</legend><div class="panel panel-default"><div><table id="eventtable" class="table" data-paging="true" data-filtering="true" data-sorting="true" data-editing="false" data-state="true"></table></div></div><button onclick="clearevent()" class="btn btn-primary btn-sm">پاکسازی گزارشات</button><div style="clear:both;"><br><br></div></div></div><div id="mqttcontent"><br><br><legend>تنظیمات MQTT</legend><br><div class="row form-group"><label class="col-xs-3">وضعیت MQTT <i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="آیا قصد فعال‌سازی MQTT را دارید؟"></i></label><div class="col-xs-9"><form><label class="radio-inline"><input type="radio" value="1" name="mqttenabled">فعال</label> <label class="radio-inline"><input type="radio" value="0" name="mqttenabled" checked="checked">غیرفعال</label></form></div></div><div class="row form-group"><label class="col-xs-3">آدرس آی‌پی <i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="آدرس آی‌پی سرور MQTT را وارد کنید"></i></label> <span class="col-xs-9"><input class="form-control input-sm" placeholder="آدرس MQTT" style="display:inline;max-width:185px" id="mqtthost" type="text"></span><br></div><div class="row form-group"><label class="col-xs-3">پورت <i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="پورت سرور MQTT"></i></label> <span class="col-xs-9"><input class="form-control input-sm" placeholder="پورت MQTT" value="" style="display:inline;max-width:185px" id="mqttport" type="text"></span><br></div><div class="row form-group"><label class="col-xs-3">نام‌کاربری <i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="کاربر سرور MQTT"></i></label> <span class="col-xs-9"><input class="form-control input-sm" placeholder="" value="" style="display:inline;max-width:185px" id="mqttuser" type="text"></span><br></div><div class="row form-group"><label class="col-xs-3">کلمه‌عبور <i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="کلمه‌عبور سرور MQTT (در صورت وجود)"></i></label> <span class="col-xs-9"><input class="form-control input-sm" placeholder="" value="" style="display:inline;max-width:185px" id="mqttpwd" type="password"></span><br></div><div class="row form-group"><label class="col-xs-3">نام کلاس <i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="عنوان کلاس - تاپیک MQTT"></i></label> <span class="col-xs-9"><input class="form-control input-sm" placeholder="نام کلاس مربوطه - تاپیک MQTT" value="" style="display:inline;max-width:185px" id="mqtttopic" type="text"></span><br><br><div class="col-xs-9 col-md-8"><button onclick="savemqtt()" class="btn btn-primary btn-sm pull-right">ذخیره</button></div></div><br><br></div><div id="networkcontent"><br><br><legend>تنظیمات وای‌فای</legend><h6 class="text-muted">لطفا نام شبکه دلخواه خود را وارد کنید، یا با جستجو در میان شبکه‌های موجود، به یکی از آنها متصل شوید.</h6><br><div class="row form-group"><label class="col-xs-3">حالت وای‌فای<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="شما می‌توانید تنظیمات شبکه پروژه را به دو صورت تنظیم کنید؛ در حالت کلاینت، دستگاه به یکی از شبکه‌های وای‌فای موجود متصل شده و از آن استفاده می‌کند؛ در حالت اکسس‌پوینت، خود دستگاه یک شبکه وای‌فای ایجاد می‌کند."></i></label><div class="col-xs-9"><form><label class="radio-inline"><input type="radio" value="1" name="wmode" id="wmodeap" onclick="handleAP()" checked="checked">اکسس‌پوینت</label> <label class="radio-inline"><input type="radio" value="0" name="wmode" id="wmodesta" onclick="handleSTA()">کلاینت</label></form></div></div><div class="row form-group"><label class="col-xs-3">نام شبکه<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="نام شبکه وای‌فای برای اتصال"></i></label> <span class="col-xs-7 col-md-5"><input class="form-control input-sm" id="inputtohide" type="text" name="ap_ssid"> <select class="form-control input-sm" style="display:none;" id="ssid" onchange="listBSSID()"></select> </span><span class="col-xs-2"><button id="scanb" type="button" class="btn btn-primary btn-xs" style="display:none;" onclick="scanWifi()">جستجو</button></span></div><div class="row form-group" style="display:none" id="hideBSSID"><label class="col-xs-3">شناسه یکتای شبکه (BSSID)<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="در صورتی که در اطراف شما، دو شبکه وای‌فای با یک اسم وجود دارد، می‌توانید با وارد کردن BSSID شبکه مد نظر، به آن شبکه متصل شوید"></i></label> <span class="col-xs-9 col-md-5"><input id="wifibssid" class="form-control input-sm" type="text" name="ap_bssid"></span></div><div class="row form-group"><label class="col-xs-3">کلمه عبور<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="کلمه‌عبور وای‌فای"></i></label> <span class="col-xs-9 col-md-5"><input id="wifipass" class="form-control input-sm" name="ap_passwd" type="password"></span></div><br><div class="row form-group" id="hideap"><label class="col-xs-3">مخفی‌نمودن شبکه<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="شبکه وای‌فای مخفی باشد؟ در صورت مخفی بودن شبکه، شبکه همچنان فعال است، ولی در جستجو نمایش داده نمی‌شود."></i></label><div class="col-xs-9"><form><label class="radio-inline"><input type="radio" value="1" name="hideapenable">بلی</label> <label class="radio-inline"><input type="radio" value="0" name="hideapenable" checked="checked">خیر</label></form></div></div><br><div class="row form-group" id="dhcp"><label class="col-xs-3">استفاده از DHCP<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="مشخص کنید آیا تمایل دارید از سرور DHCP آدرس آی‌پی دریافت کنید؟"></i></label><div class="col-xs-9"><form><label class="radio-inline"><input type="radio" value="1" name="dhcpenabled" onclick="handleDHCP()" checked="checked">بلی</label> <label class="radio-inline"><input type="radio" value="0" name="dhcpenabled" onclick="handleDHCP()">خیر</label></form></div></div><div id="staticip1" style="display:none"><div class="row form-group"><label class="col-xs-3">آدرس آی‌پی<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-html="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="آدرس آی‌پی را وارد کنید؛ برای مثال:<BR>(192.168.4.1)"></i></label> <span class="col-xs-9 col-md-5"><input id="ipaddress" class="form-control input-sm"></span></div><div class="row form-group"><label class="col-xs-3">سابنت شبکه<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-html="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="سابنت را وارد کنید، برای مثال:<BR>(255.255.255.0)"></i></label> <span class="col-xs-9 col-md-5"><input id="subnet" class="form-control input-sm"></span></div></div><div id="staticip2" style="display:none"><div class="row form-group"><label class="col-xs-3">آدرس دی‌ان‌اس سرور</label> <span class="col-xs-9 col-md-5"><input id="dnsadd" class="form-control input-sm"></span></div><div class="row form-group"><label class="col-xs-3">گذرگاه شبکه</label> <span class="col-xs-9 col-md-5"><input id="gateway" class="form-control input-sm"></span></div></div><br><div class="row form-group"><label class="col-xs-3">تعداد تلاش ناموفق<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="با تنظیم این گزینه مشخص کنید بعد از چند تلاش ناموفق برای اتصال به وای‌فای، دستگاه به حالت اکسس‌پوینت تنظیم شود. این گزینه برای عدم از بین رفتن دسترسی شما به دستگاه می‌باشد."></i></label> <span class="col-xs-9 col-md-5"><input id="failed_connect_count" class="form-control input-sm"></span><br><br><div class="col-xs-9 col-md-8"><button onclick="savenetwork()" class="btn btn-primary btn-sm pull-right">ذخیره</button></div></div><br><br></div><div id="ntpcontent"><br><br><legend>تنظیمات زمان</legend><br><div class="row form-group"><label class="col-xs-3">زمان دستگاه</label> <span id="utc" class="col-xs-9 col-md-5"></span></div><div class="row form-group"><label class="col-xs-3">زمان مرورگر شما</label> <span id="rtc" class="col-xs-9 col-md-5"></span></div><div class="row form-group"><div class="col-xs-3"><button onclick="syncBrowserTime()" class="btn btn-link btn-sm">همگام‌سازی زمان مرورگر شما با زمان دستگاه</button><i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="با استفاده از این گزینه، زمان مرورگر شما (موبایل/کامپیوتر) بر روی برد تنظیم خواهد شد؛ این امکان زمانی مفید است که برد شما دسترسی به اینترنت نداشته باشد ."></i></div></div><div class="row form-group"><label class="col-xs-3">آدرس سرور NTP<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="استفاده از پروتکل NTP برای بروزرسانی زمان با استفاده از اینترنت؛ لطفا یک سرور مناسب رو از سایت ntp.org انتخاب کنید."></i></label> <span class="col-xs-9 col-md-5"><input class="form-control input-sm" placeholder="eg. pool.ntp.org" value="pool.ntp.org" id="ntpserver" type="text"></span><br></div><div class="row form-group"><label class="col-xs-3">Intervals<i style="margin-right: 10px;" class="glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="فاصله بین درخواست‌ها در واحد دقیقه"></i></label> <span class="col-xs-9 col-md-5"><input class="form-control input-sm" placeholder="in Minutes" value="30" id="intervals" type="text"></span><br></div><div class="row form-group"><label class="col-xs-3">منطقه زمانی</label> <span class="col-xs-9 col-md-5"><select class="form-control input-sm" name="DropDownTimezone" id="DropDownTimezone"><!-- <option value="-12">(GMT -12:00) Eniwetok, Kwajalein</option>
                  <option value="-11">(GMT -11:00) Midway Island, Samoa</option>
                  <option value="-10">(GMT -10:00) Hawaii</option>
                  <option value="-9">(GMT -9:00) Alaska</option>
                  <option value="-8">(GMT -8:00) Pacific Time (US &amp; Canada)</option>
                  <option value="-7">(GMT -7:00) Mountain Time (US &amp; Canada)</option>
                  <option value="-6">(GMT -6:00) Central Time (US &amp; Canada), Mexico City</option>
                  <option value="-5">(GMT -5:00) Eastern Time (US &amp; Canada), Bogota, Lima</option>
                  <option value="-4">(GMT -4:00) Atlantic Time (Canada), Caracas, La Paz</option>
                  <option value="-3.5">(GMT -3:30) Newfoundland</option>
                  <option value="-3">(GMT -3:00) Brazil, Buenos Aires, Georgetown</option>
                  <option value="-2">(GMT -2:00) Mid-Atlantic</option>
                  <option value="-1">(GMT -1:00 hour) Azores, Cape Verde Islands</option>
                  <option selected="selected" value="0">(GMT) Western Europe Time, London, Lisbon, Casablanca</option>
                  <option value="1">(GMT +1:00 hour) Brussels, Copenhagen, Madrid, Paris</option>
                  <option value="2">(GMT +2:00) Kaliningrad, South Africa</option>
                  <option value="3">(GMT +3:00) Baghdad, Riyadh, Moscow, St. Petersburg</option> --><option value="3.5" selected="selected">(GMT +3:30) ایران/تهران</option><!-- <option value="4">(GMT +4:00) Abu Dhabi, Muscat, Baku, Tbilisi</option>
                  <option value="4.5">(GMT +4:30) Kabul</option>
                  <option value="5">(GMT +5:00) Ekaterinburg, Islamabad, Karachi, Tashkent</option>
                  <option value="5.5">(GMT +5:30) Bombay, Calcutta, Madras, New Delhi</option>
                  <option value="5.75">(GMT +5:45) Kathmandu</option>
                  <option value="6">(GMT +6:00) Almaty, Dhaka, Colombo</option>
                  <option value="7">(GMT +7:00) Bangkok, Hanoi, Jakarta</option>
                  <option value="8">(GMT +8:00) Beijing, Perth, Singapore, Hong Kong</option>
                  <option value="9">(GMT +9:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk</option>
                  <option value="9.5">(GMT +9:30) Adelaide, Darwin</option>
                  <option value="10">(GMT +10:00) Eastern Australia, Guam, Vladivostok</option>
                  <option value="11">(GMT +11:00) Magadan, Solomon Islands, New Caledonia</option>
                  <option value="12">(GMT +12:00) Auckland, Wellington, Fiji, Kamchatka</option> --></select></span><br><br><div class="col-xs-9 col-md-8"><button onclick="saventp()" class="btn btn-primary btn-sm pull-right">ذخیره</button></div><br><br><br></div><br><br></div><div id="statuscontent"><br><div class="row text-center"><div class="col-md-8 col-md-offset-2"><h1>سلام!</h1><p>در این صفحه شما می‌تونید اطلاعات وضعیت برد رو مشاهده کنید.</p><div class="panel panel-default"><div class="panel-body"><span>دانشگاه صنعتی همدان - وضعیت دستگاه</span>&nbsp; <small><strong><span id="sver"></span></strong></small></div></div></div><div class="col-md-8 col-md-offset-2"><div class="panel panel-default table-responsive"><table class="table table-hover table-striped table-condensed"><caption>دستگاه</caption><tr><th>شناسه چیپ</th><td id="chip"></td></tr><tr><th>سرعت پردازشگر</th><td id="cpu"></td></tr><tr><th>زمان روشن بودن</th><td id="uptime"></td></tr><tr><th>مقدار خالی حافظه HEAP</th><td><div class="progress" style="margin-bottom: 0 !important;"><div id="heap" class="progress-bar progress-bar-primary" role="progressbar">پیشرفت</div></div></td></tr><tr><th>مقدار خالی حافظه Flash</th><td><div class="progress" style="margin-bottom: 0 !important;"><div id="flash" class="progress-bar progress-bar-primary" role="progressbar">پیشرفت</div></div></td></tr><tr><th>مقدار خالی حافظه SPIFFS</th><td><div class="progress" style="margin-bottom: 0 !important;"><div id="spiffs" class="progress-bar progress-bar-primary" role="progressbar">پیشرفت</div></div></td></tr></table></div><div class="panel panel-default table-responsive"><table class="table table-hover table-striped table-condensed"><caption>شبکه</caption><tr><th>نام شبکه</th><td id="ssidstat"></td></tr><tr><th>آی‌پی</th><td id="ip"></td></tr><tr><th>آدرس گذرگاه</th><td id="gate"></td></tr><tr><th>نت‌مسک</th><td id="mask"></td></tr><tr><th>دی‌ان‌اس</th><td id="dns"></td></tr><tr><th>آدرس کارت شبکه</th><td id="mac"></td></tr></table></div></div><br><br></div></div><div id="userscontent"><div id="loading-img" class="text-center"><h5>در حال دریافت، منتظر بمانید...<span id="loadpages"></span></h5></div><br><div class="text-center" id="usersbanner"><h5>شما می‌توانید کارت جدید را به دو صورت اضافه کنید؛ با کلیک بر روی گزینه افزودن کاربر(استاد) یا نزدیک کردن کارت به دستگاه</h5></div><br><div class="panel panel-default"><table id="usertable" class="table" data-paging="true" data-filtering="true" data-sorting="true" data-editing="true" data-state="true"></table></div><div class="modal fade" id="editor-modal" tabindex="-1" role="dialog" aria-labelledby="editor-title"><style scoped>.form-group.required .control-label:after {
            content: "*";
            color: red;
            margin-right: 4px;
        }</style><div class="modal-dialog" role="document"><form class="modal-content form-horizontal" id="editor"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button><h4 class="modal-title" id="editor-title">افزودن کاربر (استاد)</h4></div><div class="modal-body"><input type="number" id="id" name="id" class="hidden"><div class="form-group"><label for="picctype" class="col-sm-3 control-label">نوع کارت</label><div class="col-sm-9"><input type="text" class="form-control" id="picctype" name="picctype" placeholder="نوع کارت" disabled="disabled"></div></div><div class="form-group required"><label for="uid" class="col-sm-3 control-label">شناسه کارت</label><div class="col-sm-9" style="font-family:monospace"><input type="text" class="form-control" id="uid" name="uid" placeholder="شناسه کارت" required></div></div><div class="form-group required"><label for="username" class="col-sm-3 control-label">نام کاربر/استاد</label><div class="col-sm-9"><input type="text" class="form-control" id="username" name="username" placeholder="نام کاربر/استاد" required></div></div><div class="form-group required"><label for="acctype" class="col-sm-3 control-label">نوع دسترسی</label><div class="col-sm-9"><select class="form-control" id="acctype" required><option selected="selected" value="1">همیشگی</option><!--
                                <option value="2">Within Selected Hours</option>
                                <option value="3">Within Selected Days</option>
                                <option value="4">Within Selected Days and Hours</option>
                                <option value="5">On Weekends</option>
                                <option value="6">On Weekdays</option>
                                --><option value="0">غیرفعال</option><!-- <option value="99">مدیر</option> --></select></div></div><!--
                    <div class="form-group">
                        <label for="accinfo" class="col-sm-3 control-label">Acc Type Info</label>
                        <div class="col-sm-9">
                            <pre id="accinfo">
                            </pre>
                        </div>
                    </div>
                    --><!-- <div class="form-group required">
                        <label for="validuntil" class="col-sm-3 control-label">تاریخ اعتبار</label>
                        <div class="col-sm-9">
                            <input type="date" class="form-control" id="validuntil" name="validuntil" value="2038-01-01" placeholder="مدت اعتبار" required>
                        </div>
                    </div> --></div><div class="modal-footer"><button type="submit" class="btn btn-primary">ذخیره تغییرات</button> <button type="button" class="btn btn-default" data-dismiss="modal">انصراف</button></div></form></div></div><br><br></div>